CREATE DATABASE IF NOT EXISTS `test`;

USE `test`;

CREATE TABLE IF NOT EXISTS `wallets`
(
    id bigint auto_increment,
    ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    iin varchar(255) NOT NULL,
    accountno varchar(255) NOT NULL UNIQUE,
    amount bigint UNSIGNED DEFAULT 0,
    transfer tinyint DEFAULT 0,
    PRIMARY KEY (`id`)
);

INSERT INTO `wallets` (`accountno`, `iin`)
VALUES ('KZT0000000000', 'account_init');

INSERT INTO `wallets` (`iin`, `accountno`, `amount`, `updated_at`, `ts`) 
VALUES
    ('910815450350', 'KZT0000000001', 998654884, '2022-01-18 14:36:28', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000002', 2699, '2022-01-18 14:35:41', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000003',  1231341, '2022-01-16 17:45:15', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000004',  16276, '2022-01-16 17:02:18', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000005', 135292, '2022-01-18 14:14:24', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000006', 1402, '2022-01-16 17:43:56', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000007',  0, '2021-12-07 11:58:08', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000008', 0, '2022-01-16 17:43:56', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000009',  154, '2022-01-16 13:08:02', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000010',  113393,'2022-01-16 16:45:59','2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000011', 0, '2021-12-07 11:58:08','2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000012',  0, '2021-12-07 19:51:25', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000013',  0, '2022-01-16 17:43:56', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000014', 678, '2022-01-16 13:26:33', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000015',  0, '2021-12-07 11:58:08', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000016', 0, '2021-12-07 11:58:08', '2021-12-07 14:05:23'),
    ('910815450350', 'KZT0000000017', 0, '2021-12-07 17:10:45', '2021-12-07 17:10:45'),
    ('910815450350', 'KZT0000000018', 87, '2022-01-16 13:07:50', '2021-12-07 17:27:56'),
    ('910815450350', 'KZT0000000019', 0, '2021-12-08 16:48:14', '2021-12-08 16:48:14'),
    ('601119400567', 'KZT0000000020', 0, '2021-12-08 16:56:33', '2021-12-08 16:56:33'),
    ('601119400567', 'KZT0000000021', 0, '2021-12-08 16:58:32', '2021-12-08 16:58:32'),
    ('601119400567', 'KZT0000000022', 13177, '2022-01-18 14:26:33', '2021-12-09 13:00:30'),
    ('601119400567', 'KZT0000000023', 1212, '2022-01-16 16:54:28', '2021-12-18 13:19:26'),
    ('910815450350', 'KZT0000000024', 0, '2022-01-16 14:21:38', '2021-12-18 13:19:34'),
    ('980124450084', 'KZT0000000025', 132, '2021-12-26 20:18:40', '2021-12-25 02:59:51'),
    ('980124450084', 'KZT0000000026', 0, '2021-12-25 02:59:54', '2021-12-25 02:59:54'),
    ('980124450084', 'KZT0000000027', 0, '2021-12-25 02:59:57', '2021-12-25 02:59:57'),
    ('980124450084', 'KZT0000000028', 0, '2021-12-25 03:02:18', '2021-12-25 03:02:18'),
    ('980124450084', 'KZT0000000029', 0, '2021-12-25 03:06:11', '2021-12-25 03:06:11'),
    ('980124450084', 'KZT0000000030', 3454, '2021-12-25 21:12:07', '2021-12-25 03:17:03'),
    ('910815450350', 'KZT0000000031', 0, '2021-12-26 20:51:54', '2021-12-26 20:51:54'),
    ('910815450350', 'KZT0000000032', 804, '2022-01-16 16:15:10', '2021-12-30 01:21:09'),
    ('910815450350', 'KZT0000000033', 0, '2022-01-16 17:01:13', '2022-01-13 01:35:47'),
    ('910815450350', 'KZT0000000034', 2001, '2022-01-16 16:15:01', '2022-01-13 15:26:07'),
    ('910815450350', 'KZT0000000035', 691, '2022-01-16 13:26:44', '2022-01-13 19:33:32'),
    ('601119400567', 'KZT0000000036', 401, '2022-01-16 16:26:16', '2022-01-16 16:19:12'),
    ('980124450072', 'KZT0000000037', 0, '2022-01-13 19:45:23', '2022-01-13 19:45:23');

CREATE TABLE IF NOT EXISTS `transactions`
(
    id  bigint auto_increment,
    ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    transfer_type varchar(255) NOT NULL,
    from_acc varchar(255) DEFAULT '',
    to_acc varchar(255) NOT NULL,
    amount bigint UNSIGNED NOT NULL,
    PRIMARY KEY (`id`)
);


INSERT INTO `transactions` (`ts`, `transfer_type`, `from_acc`, `to_acc`, `amount`) 
VALUES
    ('2021-12-07 19:54:06', 'transfer', 'KZT0000000001', 'KZT0000000002', 100),
    ('2021-12-07 19:42:57', 'transfer', 'KZT0000000009', 'KZT0000000006', 100),
    ('2021-12-07 20:50:54', 'transfer', 'KZT0000000009', 'KZT0000000006', 100),
    ('2021-12-07 21:07:36', 'transfer', 'KZT0000000006', 'KZT0000000003', 100),
    ('2021-12-07 21:11:18', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-08 12:38:19', 'topup','','KZT0000000001', 100),
    ('2021-12-08 12:40:58', 'topup', '', 'KZT0000000001', 2),
    ('2021-12-08 12:42:06', 'topup', '', 'KZT0000000001', 3),
    ('2021-12-08 12:56:27', 'topup', '', 'KZT0000000010', 24), 
    ('2021-12-08 13:46:21', 'topup', '', 'KZT0000000001', 121), 
    ('2021-12-08 16:17:58', 'topup', '', 'KZT0000000010', 23), 
    ('2021-12-08 16:20:05', 'transfer', 'KZT0000000006', 'KZT0000000006', 12),
    ('2021-12-08 16:23:33', 'transfer', 'KZT0000000006', 'KZT0000000005', 12),
    ('2021-12-11 15:29:47', 'topup', '', 'KZT0000000010', 1213), 
    ('2021-12-14 10:01:18', 'topup', '', 'KZT0000000001', 12),
    ('2021-12-14 10:05:51', 'transfer', 'KZT0000000001', 'KZT0000000006', 1), 
    ('2021-12-15 10:26:10', 'topup', '', 'KZT0000000001', 1), 
    ('2021-12-15 14:38:05', 'topup', '', 'KZT0000000010', 111111), 
    ('2021-12-16 15:50:01', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-16 15:50:53', 'transfer', 'KZT0000000001', 'KZT0000000006', 1), 
    ('2021-12-18 12:15:11', 'topup', '', 'KZT0000000002', 1212),
    ('2021-12-18 12:44:52', 'topup', '', 'KZT0000000004', 12212),
    ('2021-12-18 12:45:04', 'transfer', 'KZT0000000003', 'KZT0000000005', 11), 
    ('2021-12-18 13:37:34', 'transfer', 'KZT0000000003', 'KZT0000000002', 11),
    ('2021-12-18 13:39:09', 'transfer', 'KZT0000000009', 'KZT0000000010', 11),
    ('2021-12-18 13:39:30', 'transfer', 'KZT0000000009', 'KZT0000000010', 11), 
    ('2021-12-18 13:46:59', 'transfer', 'KZT0000000009', 'KZT0000000010', 1), 
    ('2021-12-19 14:46:07', 'topup', '', 'KZT0000000001', 222),
    ('2021-12-19 14:48:44', 'topup', '', 'KZT0000000001', 333), 
    ('2021-12-19 16:36:45', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-19 16:40:58', 'topup', '', 'KZT0000000001', 1222),
    ('2021-12-19 16:41:23', 'topup', '', 'KZT0000000001', 1), 
    ('2021-12-19 16:41:30', 'topup', '', 'KZT0000000001', 1), 
    ('2021-12-23 14:34:21', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-23 14:56:26', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-23 15:21:00', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-23 15:25:29', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-23 15:36:04', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-23 15:44:52', 'topup', '', 'KZT0000000001', 12),
    ('2021-12-23 15:49:32', 'topup', '', 'KZT0000000001', 1221), 
    ('2021-12-23 15:52:07', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-25 21:12:07', 'topup', '', 'KZT0000000030', 3454), 
    ('2021-12-26 20:18:41', 'topup', '', 'KZT0000000025', 132),
    ('2021-12-30 00:09:01', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-30 00:11:24', 'topup', '', 'KZT0000000001', 122),
    ('2021-12-30 00:15:49', 'topup', '', 'KZT0000000001', 1221), 
    ('2021-12-30 00:17:46', 'topup', '', ' KZT0000000001', 1), 
    ('2021-12-30 00:40:35', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2021-12-30 00:40:36', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2021-12-30 00:41:34', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2021-12-30 00:41:36', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2021-12-30 00:43:43', 'transfer', 'KZT0000000001', 'KZT0000000003', 12),
    ('2021-12-30 01:05:32', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2021-12-30 01:10:06', 'transfer', 'KZT0000000001', 'KZT0000000005', 12),
    ('2021-12-30 01:14:17', 'transfer', 'KZT0000000001', 'KZT0000000002', 12),
    ('2021-12-30 01:19:34', 'transfer', 'KZT0000000001', 'KZT0000000003', 122),
    ('2021-12-30 01:20:44', 'transfer', 'KZT0000000001', 'KZT0000000003', 12),
    ('2022-01-13 14:56:22', 'topup', '', 'KZT0000000002', 1221), 
    ('2022-01-13 15:25:44', 'transfer', 'KZT0000000001', 'KZT0000000003', 1221), 
    ('2022-01-13 15:25:55', 'topup', '', 'KZT0000000001', 1212),
    ('2022-01-13 16:23:27', 'topup', '', 'KZT0000000022', 12121), 
    ('2022-01-13 16:32:16', 'transfer', 'KZT0000000001', 'KZT0000000023', 1212),
    ('2022-01-13 16:32:38', 'transfer', 'KZT0000000001', 'KZT0000000002', 122),
    ('2022-01-13 17:22:59', 'transfer', 'KZT0000000001', 'KZT0000000022', 12),
    ('2022-01-13 19:06:59', 'transfer', 'KZT0000000001', 'KZT0000000002', 1221),
    ('2022-01-13 19:18:56', 'topup', '', 'KZT0000000002', 12),
    ('2022-01-13 19:27:41', 'topup', '', 'KZT0000000001', 999999999), 
    ('2022-01-13 19:32:16', 'transfer', 'KZT0000000001', 'KZT0000000003', 1222222),
    ('2022-01-13 19:32:32', 'topup', '', 'KZT0000000001', 24321), 
    ('2022-01-13 19:32:38', 'transfer', 'KZT0000000001', 'KZT0000000004', 1231), 
    ('2022-01-13 19:33:52', 'topup', '', 'KZT0000000035', 1), 
    ('2022-01-13 19:34:36', 'transfer', 'KZT0000000001', 'KZT0000000035', 12),
    ('2022-01-13 19:35:32', 'transfer', 'KZT0000000001', 'KZT0000000022', 12),
    ('2022-01-13 19:50:12', 'transfer', 'KZT0000000001', 'KZT0000000034', 1212),
    ('2022-01-13 19:50:35', 'transfer', 'KZT0000000001', 'KZT0000000022',  1212),
    ('2022-01-13 19:51:03', 'topup', '', 'KZT0000000001', 34), 
    ('2022-01-16 13:07:43', 'topup', '', 'KZT0000000001', 34), 
    ('2022-01-16 13:07:50', 'topup', '', 'KZT0000000018', 87), 
    ('2022-01-16 13:08:02', 'transfer', 'KZT0000000001', 'KZT0000000009', 77), 
    ('2022-01-16 13:08:19', 'transfer', 'KZT0000000001', 'KZT0000000005', 789), 
    ('2022-01-16 13:08:28', 'transfer', 'KZT0000000001', 'KZT0000000032', 798), 
    ('2022-01-16 13:08:43', 'transfer', 'KZT0000000001', 'KZT0000000022', 13), 
    ('2022-01-16 13:24:26', 'topup', '', 'KZT0000000001', 77), 
    ('2022-01-16 13:24:33', 'transfer', 'KZT0000000001', 'KZT0000000003', 7777), 
    ('2022-01-16 13:25:36', 'transfer', 'KZT0000000001', 'KZT0000000034',  777), 
    ('2022-01-16 13:26:33', 'transfer', 'KZT0000000001', 'KZT0000000014', 678), 
    ('2022-01-16 13:26:44', 'transfer', 'KZT0000000001', 'KZT0000000035', 678),
    ('2022-01-16 13:26:51', 'topup', '', 'KZT0000000002', 567), 
    ('2022-01-16 13:27:00', 'topup', '', 'KZT0000000034', 6), 
    ('2022-01-16 14:19:54', 'topup', '', 'KZT0000000001', 1221), 
    ('2022-01-16 14:20:35', 'transfer', 'KZT0000000003', 'KZT0000000005', 12),
    ('2022-01-16 14:21:53', 'transfer', 'KZT0000000001', 'KZT0000000004', 66), 
    ('2022-01-16 16:06:44', 'topup', '', 'KZT0000000001', 12),
    ('2022-01-16 16:06:51', 'transfer', 'KZT0000000001', 'KZT0000000004', 122),
    ('2022-01-16 16:07:08', 'transfer', 'KZT0000000001', 'KZT0000000022', 1), 
    ('2022-01-16 16:12:56', 'transfer', 'KZT0000000001', 'KZT0000000022', 11), 
    ('2022-01-16 16:13:27', 'transfer', 'KZT0000000001', 'KZT0000000004', 11), 
    ('2022-01-16 16:14:14', 'transfer', 'KZT0000000001', 'KZT0000000002', 1), 
    ('2022-01-16 16:14:33', 'transfer', 'KZT0000000001', 'KZT0000000022', 12),
    ('2022-01-16 16:15:01', 'transfer', 'KZT0000000001', 'KZT0000000034', 6), 
    ('2022-01-16 16:21:17', 'transfer', 'KZT0000000022', 'KZT0000000001', 12),
    ('2022-01-16 16:26:23', 'transfer', 'KZT0000000022', 'KZT0000000001', 12),
    ('2022-01-16 16:45:59', 'transfer', 'KZT0000000001', 'KZT0000000010', 999), 
    ('2022-01-16 16:46:34', 'transfer', 'KZT0000000001', 'KZT0000000022', 12),
    ('2022-01-16 16:46:49', 'transfer', 'KZT0000000001', 'KZT0000000022', 12),
    ('2022-01-16 17:01:1',  'transfer', 'KZT0000000001', 'KZT0000000003', 122),
    ('2022-01-16 17:01:26', 'transfer', 'KZT0000000003', 'KZT0000000001', 1212),
    ('2022-01-16 17:01:42', 'transfer', 'KZT0000000002', 'KZT0000000006', 1212),
    ('2022-01-16 17:01:58', 'transfer', 'KZT0000000002', 'KZT0000000022', 122),
    ('2022-01-16 17:02:09', 'transfer', 'KZT0000000001', 'KZT0000000004', 1222),
    ('2022-01-16 17:02:18', 'transfer', 'KZT0000000001', 'KZT0000000004', 1212),
    ('2022-01-16 17:02:24', 'transfer', 'KZT0000000002', 'KZT0000000001', 1212),
    ('2022-01-16 17:02:30', 'transfer', 'KZT0000000001', 'KZT0000000005', 12222),
    ('2022-01-18 14:36:28', 'topup', '', 'KZT0000000001', 1221);


